import { SmartWallet, createAsyncLocalStorage } from "@thirdweb-dev/wallets";
import { createSyncStorage } from "../../../core/AsyncStorage";
import { SmartWalletFlow } from "../../components/ConnectWalletFlow/SmartWallet/SmartWalletFlow";
export const smartWallet = (wallet, config) => {
    const WalletSelectUI = wallet.selectUI;
    return {
        ...wallet,
        create: (options) => new SmartWallet({
            ...options,
            ...config,
            walletStorage: createAsyncLocalStorage("smart-wallet"),
            wcStorage: createSyncStorage("smart-wallet"),
        }),
        connectUI(props) {
            return <SmartWalletFlow {...props} personalWalletConfig={wallet}/>;
        },
        selectUI: WalletSelectUI
            ? (props) => {
                return <WalletSelectUI {...props} walletConfig={wallet}/>;
            }
            : undefined,
        personalWallets: [wallet],
    };
};
